{"pubDate": "2024-01-21T03:00:46", "original_title": "How A Steam Bug Once Deleted All Of Someone\u2019s User Data", "link": "https://hackaday.com/2024/01/20/how-a-steam-bug-once-deleted-all-of-someones-user-data/", "source": "https://hackaday.com/blog/feed/", "thumbnail": "https://hackaday.com/wp-content/uploads/2024/01/steam_linux_shell_oh_no.jpg", "youtube": "https://www.youtube.com/watch?v=qzZLvw2AdvM", "original_content": "In a retrospective, [Kevin Fang] takes us back to 2015, when on the Steam for Linux issue tracker [keyvin] opened an issue to report that starting the Steam client after moving the Steam folder had just wiped all of his user data, including his backup drive mounted under /media. According to [keyvin], he moved the standard ~/.local/share/steam to a drive mounted under /media and symlinked ~/.local/share/steam to this new location on the external drive. He then tried starting Steam, which failed, before Steam crashed and tried reinstalling itself. Thats when [keyvin] realized that Steam had apparently recursively deleted everything owned by his user from the root folder.\nThe infamous Valve code that made Linux users sad.\nIn the issue thread, user [doofy] got hit by the same bug when trying to directly start the ~/.local/share/steam/steam.sh script with debugging enabled. He then was the first to point out the rm -rf in that steam.sh script, but since this particular line is in a function only called when Steam tries to remove and reinstall itself to fix a botched start, how did this happen? Ultimately it seems to be because of the STEAMROOT variable being set to an empty string, and another unset variable triggering the reset_steam() function, leading to the demise of all the user data.\nSince then Valve has presumably fixed the issue, as no further users have filed tickets, but its concerning that a similar issue seems to still exist on Windows. Whether or not the original Linux issue has been fixed, it shows clearly how one should always check return values and perhaps, just maybe, never do an automated rm -rf or equivalent.\n\n", "title": "Steam for Linux\u306e\u554f\u984c\u306b\u3088\u308b\u30c7\u30fc\u30bf\u6d88\u5931\u3001Valve\u306e\u89e3\u6c7a\u7b56\u306f\uff1f", "body": "2015\u5e74\u306eSteam for Linux\u306e\u554f\u984c\u3067\u3001\u30e6\u30fc\u30b6\u30fc\u30c7\u30fc\u30bf\u304c\u6d88\u3048\u308b\u30d0\u30b0\u304c\u3042\u3063\u305f\u3002\u30e6\u30fc\u30b6\u30fc\u304c\u79fb\u52d5\u3057\u305fSteam\u30d5\u30a9\u30eb\u30c0\u306e\u5834\u6240\u304c\u539f\u56e0\u3067\u3001\u5168\u3066\u306e\u30c7\u30fc\u30bf\u304c\u524a\u9664\u3055\u308c\u305f\u3002\u30d0\u30b0\u306f\u4fee\u6b63\u3055\u308c\u305f\u304c\u3001\u540c\u69d8\u306e\u554f\u984c\u304cWindows\u3067\u3082\u8d77\u304d\u308b\u53ef\u80fd\u6027\u3082\u3042\u308b\u3002rm -rf\u306e\u3088\u3046\u306a\u81ea\u52d5\u6d88\u53bb\u306f\u6ce8\u610f\u304c\u5fc5\u8981\u3002", "titles": ["Steam for Linux\u306e\u554f\u984c\u306b\u3088\u308b\u30c7\u30fc\u30bf\u6d88\u5931\u3001Valve\u306e\u89e3\u6c7a\u7b56\u306f\uff1f", "Linux\u30e6\u30fc\u30b6\u30fc\u306b\u3068\u3063\u3066\u306e\u6b8b\u5ff5\u306a\u30b1\u30fc\u30b9\u3001Valve\u30b3\u30fc\u30c9\u306e\u554f\u984c\u3068\u306f\uff1f", "Steam\u3067\u30d5\u30a9\u30eb\u30c0\u79fb\u52d5\u5f8c\u306b\u30c7\u30fc\u30bf\u304c\u6d88\u3048\u308b\u30ea\u30b9\u30af\u3001\u6ce8\u610f\u70b9\u306f\uff1f", "Steam\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3088\u308a\u30c7\u30fc\u30bf\u304c\u524a\u9664\u3055\u308c\u308b\u554f\u984c\u3001\u89e3\u6c7a\u7b56\u306f\uff1f", "Windows\u3067\u3082\u540c\u69d8\u306e\u554f\u984c\u304c\u5b58\u5728\u3059\u308b\u53ef\u80fd\u6027\u3001\u6ce8\u610f\u304c\u5fc5\u8981"]}