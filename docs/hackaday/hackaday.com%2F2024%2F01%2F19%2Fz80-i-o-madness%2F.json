{"pubDate": "2024-01-19T16:30:01", "original_title": "Z80 I/O Madness", "link": "https://hackaday.com/2024/01/19/z80-i-o-madness/", "source": "https://hackaday.com/blog/feed/", "thumbnail": "https://hackaday.com/wp-content/uploads/2024/01/z80.png", "youtube": "https://www.youtube.com/watch?v=aB9AuKx8kBU", "original_content": "While the 8080 started the personal computer revolution, the Z80 was quickly a winner because it was easier to use and had more capabilities. [Noel] found out though that the Z80 OUT instruction is a little odd and, in fact, some of the period documentation was incorrect.\nMany CPUs used memory-mapped I/O, but the 8080 and Z80 had dedicated I/O addressing pins and instructions so you could fill up the memory map with actual memory and still have some I/O devices. A quick look in the famous Zaks book on Z80 programming indicates that an instruction like OUT (C),A would write the A register to the output device indicated by the BC register pair (even though the instruction only mentions C. However, [Noel] missed the note about the B register and saw in the Zilog documentation that it did. Since he didnt read the note in the Zaks book until later, he assumed it was a discrepancy. Therefore, he went to the silicon to get the correct answer.\nBreadboarding a little Z80 system allowed him to look at the actual behavior of the instruction. However, he also didnt appreciate the syntax of the assembly language statements. Weve done enough Z80 assembly that none of it struck us as particularly crazy, especially since odd instruction mnemonics were the norm in those days.\nStill, it was interesting to see him work through all the instructions. He then looks at how Amstrad used or abused the instructions to do something even stranger.\nIf you want to breadboard a minimal Z80 system, consider this one. If you enjoy abuse of the Z80 I/O system, you dont want to miss this Z80 hack for protected mode.\n\n"}