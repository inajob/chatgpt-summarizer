{"pubDate": "2026-01-06T18:00:55", "original_title": "Linux Fu: Yet Another Shell Script Trick", "link": "https://hackaday.com/2026/01/06/linux-fu-yet-another-shell-script-trick/", "source": "https://hackaday.com/blog/feed/", "thumbnail": "https://hackaday.com/wp-content/uploads/2020/05/LinuxFu.jpg", "original_content": "Im going to go ahead and admit it: I really have too many tray icons. You know the ones. They sit on your taskbar, perhaps doing something in the background or, at least, giving you fingertip access to some service. Youd think that creating a custom tray icon would be hard, but on Linux, it can be surprisingly simple. Part of the reason is that the Freedesktop people created standards, so you dont typically have to worry about how it works on KDE vs. GNOME or any of the other desktop environments. Thats a big win.\nIn fact, it is simple enough that you can even make your own tray icons with a lowly shell script. Well, of course, like most interesting shell scripts, you need some helper programs and, in this case, well use YAD  which is yet another dialog, a derivative of Zenity. Its a GTK program that may cause minor issues if you primarily use KDE, but they are nothing insurmountable.\nThe program is somewhat of a Swiss army knife. You can use it to make dialogs, file pickers, color selectors, printer dialogs, and even  in some versions  simple web browsers. Weve seen plenty of tools to make pretty scripts, of course. However, the ability to quickly make good-looking taskbar icons is a big win compared to many other tools.\nDocs\nDepending on what you want to do, YAD will read things from a command line, a file, or standard input. There are dozens of options, and it is, honestly, fairly confusing. Luckily, [Ingemar Karlsson] wrote the Yad Guide, which is very digestible and full of examples.\nExactly what you need will depend on what you want to do. In my case, I want a tray icon that picks up the latest posts from my favorite website. You know. Hackaday?\n\nThe Web Connection\nYAD can render HTML using WebKit. However, I ran into immediate problems. The version in the repos for the Linux I use was too old to include the HTML option. I found a supposedly statically linked version, but it was missing dependencies. Even after I fixed that, the program still reported errors related to the NVIDIA OpenGL stack.\nI quickly abandoned the idea of using a web browser. I turned to two other YAD features. First, the basic dialog can hold text and, in most cases, renders quasi-HTML because it uses the Pango library. However, there is also a text-info dialog built in. Unlike most other YAD features, the text-info dialog reads its input from standard input. However, it doesnt render markup.\nIn the end, I decided to try them both. Why not? It is simple enough. But first, I needed a tray icon.\nThe Tray\nYAD can provide a notification, which is what it calls a tray icon. You can specify an icon, some text, and a right-click context menu. In addition, it can react when someone clicks on the icon.\nCan you find the tray icon were talking about?\nI decided to write a script with multiple personalities. If you run it with no arguments, it sets up the tray icon. If you pass anything to it, it will show a dialog with the latest Hackaday articles from the RSS feed. I wanted to make those links clickable, and that turned out to be a bit of a wrinkle. Both versions will do the job, but they each need a different approach, as you will see.\nHeres the tray code:\n\n\nyad --notification --image=$0.icon.png --text=Hackaday Now \\\n   --menu=Quit!quit!gtk-quit --command=$0 show --no-middle\n\n\nYou can probably guess at most of this without the manual. The image is stored in a file with the same name as the script, but with .icon.png at the end. Thats the icon in the tray. The simple menu provides an option to exit the program. If you click the icon, it calls the same script again, but with the show argument. The script doesnt care what the argument is, but maybe one day it will.\nSo that part of the project was extremely simple. The next job is making the dialog appear.\nText Info\nGrabbing the RSS feed with wget is trivial. You could use grep, sed, and bash pattern replacement to extract the titles and URLs, but I opted for awk and a brute-force parsing approach.\nThis works, but the URLs are long and not terribly attractive. The list is scrollable, and there are more links below the visible ones.\nThe standard output of awk pipes into YAD, but you cant readily apply formatting or hyperlinks. You can use formatting in regular dialog text, which will appear before the other output. Thats where the yellow Hackaday Today! title in the adjacent screenshot gets set. In addition, you can automatically detect URLs and make them clickable using the --show-uri option.\nHeres the relevant command:\n\n\nyad --text-info \\\n   --text span foreground=$TITLECOLORbbigbigHackaday Today!/big/big/b/span \\\n   --show-uri --window-icon=$0.icon.png \\\n   --uri-color=$LINKCOLOR --width=$WIDTH --height=$HEIGHT \\\n   --Title Hackaday Posts --button=Close!gtk-ok \\\n   --buttons-layout=center --escape-ok 2/dev/null\n\nYoull notice that the text option does take Pango formatting and the --show-uri option makes the links clickable. By default, dialogs have an Open and Cancel button, but I forced this one to have a single close button, accept escape, and I wanted the button centered.\nAs you can see in the screenshot, the result isnt bad, but it does require having the title followed by a long URL that you can click on and thats a little ugly.\nStock Dialog\nUsing a standard dialog instead of text-info allows better formatting.\nSince the text option works with any dialog and handles formatting, I decided to try that. The awk code was nearly the same, except for the output formatting. In addition, the output now needs to go on the command line instead of through a pipe.\nThis does make the script a bit more unwieldy. The awk script sets a variable, since jamming the command into the already busy YAD command line would make the script more complicated to read and work with.\nThe YAD command is still simple, though:\n\n\nyad \\\n--text=$DATA \\\n--window-icon=$0.icon.png \\\n--width=$WIDTH --height=$HEIGHT \\\n--Title Hackaday Posts --button=Close!gtk-ok \\\n--buttons-layout=center --escape-ok\n\n\nThe DATA variable has the formatted output text. The result looks better, as you can see in the screenshot. In either version, if you click an underlined link, your default browser should open the relevant post.\nOther Choices\nIf you want to install either script, you can get it from\u00a0GitHub. Of course, you could do this in Python or any other conventional language. There are also programs for minimizing another program to the tray, like AllTray or KDocker, although some of these may only work with X11 and not Wayland.\nIt would have been nice to have an integrated browser, although, thanks again to FreeDesktop, it is simple enough to open a URL and launch the systems default browser.\nPrefer your Hackaday feed on the command line? Check out the comments for this post. Meanwhile, send us a tip (you know, a link to your project, not a gratuity) and maybe youll see your own project show up on the feed.", "title": "- Linux\u3067\u7c21\u5358\u306b\u4f5c\u308b\u30ab\u30b9\u30bf\u30e0\u30c8\u30ec\u30a4\u30a2\u30a4\u30b3\u30f3", "body": "Linux\u3067\u306e\u30c8\u30ec\u30a4\u30a2\u30a4\u30b3\u30f3\u4f5c\u6210\u304c\u7c21\u5358\u3067\u3001YAD\u3092\u4f7f\u3046\u3068\u4fbf\u5229\u3002", "titles": ["- Linux\u3067\u7c21\u5358\u306b\u4f5c\u308b\u30ab\u30b9\u30bf\u30e0\u30c8\u30ec\u30a4\u30a2\u30a4\u30b3\u30f3", "- YAD\u3092\u4f7f\u3063\u305f\u901a\u77e5\u30a2\u30a4\u30b3\u30f3\u306e\u4f5c\u6210\u65b9\u6cd5", "- RSS\u30d5\u30a3\u30fc\u30c9\u3092\u8868\u793a\u3059\u308b\u30c8\u30ec\u30a4\u30a2\u30a4\u30b3\u30f3\u306e\u30b9\u30af\u30ea\u30d7\u30c8", "- \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5b9f\u73fe\u3059\u308b\u7f8e\u3057\u3044\u30c8\u30ec\u30a4\u30a2\u30a4\u30b3\u30f3", "- Hackaday\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u96fb\u5b50\u5de5\u4f5c\u7528\u30c4\u30fc\u30eb\u306e\u7d39\u4ecb"]}