{"pubDate": "2025-12-30T18:00:02", "original_title": "Linux Fu: Compose Yourself!", "link": "https://hackaday.com/2025/12/30/linux-fu-compose-yourself/", "source": "https://hackaday.com/blog/feed/", "thumbnail": "https://hackaday.com/wp-content/uploads/2020/05/LinuxFu.jpg", "original_content": "Our computers can display an astonishing range of symbols. Unicode alone defines more than 150,000 characters, covering everything from mathematical operators and phonetic alphabets to emoji and obscure historical scripts. Our keyboards, on the other hand, remain stubbornly limited to a few dozen keys.\nOn Windows, the traditional workaround involves memorizing numeric codes or digging through character maps. Linux, being Linux, offers something far more flexible: XCompose. It\u2019s one of those powerful, quietly brilliant features that\u2019s been around forever, works almost everywhere, and somehow still feels like a secret.\nXCompose is part of the X11 input system. It lets you define compose sequences: short key sequences that produce a Unicode character. Think of it as a programmable \u201cdead key\u201d system on steroids. This can be as simple as programming an E to produce a Euro sign or as complex as converting flower into a little flower emoji. Even though the system originated with X11, Ive been told that it mostly works with Wayland, too. So lets look deeper.\n\nStarting XCompose\nThe secret is the Compose or Multi-key. You press it to essentially escape into XCompose mode, so when you type flower, it knows you dont want to insert those literal letters in. You can pick which keyboard key is your compose key in your system settings. The Right Alt or Ctrl key is a common choice. I use my Caps Lock key, since I never really use it for anything else.\nYou can set the Compose key in other ways, too, including in ~/.XCompose, but it is usually easier to set it in the system settings. However, ~/.XCompose is one place you can set up custom rules.\nBy default, though, you should have some useful combos. For example, Compose ' e it should give you \u00e9 and Compose \" o should give you \u00f6. The default rules are in /usr/share/X11/locale/*/Compose, where the * is your locale of choice.\n<!--more-->\nCustomize\nThe defaults usually cover a lot of ground. But you may want to define your own. You can do that by creating or editing ~/.XCompose. This file can contain rules or include other rule files. I have heard, however, that Wayland doesnt do includes, so if you use that, it is something to keep in mind.\nThe file format is simple enough, with each line being a definition:\n\n\nMulti_keyae : \u00e6\n\nDont make the mistake of trying to write something like @. All the special characters need the names from X11s keysymdef.h file like at or asterisk.\nWhen you make a custom file, youll usually start with:\n\ninclude %L\n\nThis tells the system to load the defaults for your locale. You can also use %H for your home directory or %S for the system directory. When using some systems, you may have to include /%L instead.\nFormally, the configuration line looks like this:\n\nEVENT... : RESULT  # comment\n\nThe EVENT allows you to not only specify keys but also modifiers that must be or must not be present. The RESULT can be a string or a character, and you can even insert an octal or hex number to be sure you get the key you want. For more, read the man page.\nIt is worth noting that any definition you provide will override the system ones, so if you dont like something, it is easy to redefine it to something else. One nice thing is that the result doesnt have to be a single character. You can use an entire string system. So:\n\nMulti_key c q : CQ de WD5GNR K\n\nAs far as I know, theres no way to embed a newline in the result that always works. You can try using something like \\xa, for example, but \\n doesnt work. Also, no substitutions work on password/PIN entry, and thats by design.\nWhy Build Your Own?\nYou can build up strings that make sense to you. But you know someones already done it. The repo has a core file of interesting definitions and some extra ones, too. My suggestion: dont use their install function, which only gives you the core. Just create your own file like this, adjusting for wherever you put the files:\n\ninclude %L\n\ninclude /home/xxx/xcompose/dotXCompose\ninclude /home/xxx/xcompose/frakturcompose\ninclude /home/xxx/xcompose/emoji.compose\ninclude /home/xxx/xcompose/modletters.compose\ninclude /home/xxx/xcompose/parens.compose\n\nKeep in mind that when you change this file, it will only apply to GUI apps you started after the change. Try Compose : ) to get among others.\nAnd if you dont like that collection, there are others.\nSome Common Use Cases\nMusic? Try \u266d (#b) or \u266f (##). You can even make notes like \u266a (#e). Prefer math? How about \u2260 (/=) or a square root symbol \u221a (v/). If your math runs more to accounting, you can write about Euros (\u20ac  =E) or Yen (\u00a5  =Y). Hams will appreciate /O which produces \u00d8 (note, that is an upper case O on the input).\nThere are plenty of other ones, too. The best way to know is to look in the files you are using and experiment.\n\nMulti_key 3 3 : \u00af_(\u30c4)_/\u00af # Shrug\n\nIt is easy to code up things like your name, your e-mail address, and more. Since you can use names instead of cryptic keystrokes, it is much easier to use. For example, I forget that my name is on Macro+F5, but Compose@name is easy to remember. I find it makes it easy to remember if I prefix all (or most of ) my personal commands with some character like @. So I might have @name, @add, @tel, and @email, for example. Just dont forget, the actual rules have to use the key names:\n\n\nMulti_keyatname:Al Williams\n\n\nSome applications, notably GTK apps, wont work with XCompose without some tweaking. In particular, you may need to override the default input method. If this problem bites you, a quick search for XCompose and GTK should give you some advice. Theres always a chance your app, or even some input fields in your app, wont work with XCompose. Thats life.\nWhat It Isnt\nKeep in mind that XCompose only works in the GUI. It isnt context-aware. It doesnt allow you to insert multiple lines. If you need scripting and other advanced features, this isnt the right place to be. Want to just map keys sometimes? You can do it, but not with this tool.\nBut for nearly universal keyboard remappings, it works quite well, once you get used to the syntax. Have a favorite line in your .XCompose? Share it in the comments!"}