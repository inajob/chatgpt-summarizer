{"pubDate": "2024-11-25T15:00:04", "original_title": "Apollo-era PCB Reverse Engineering to KiCad", "link": "https://hackaday.com/2024/11/25/apollo-era-pcb-reverse-engineering-to-kicad/", "source": "https://hackaday.com/blog/feed/", "thumbnail": "https://hackaday.com/wp-content/uploads/2024/11/board-front-cropped.jpg", "original_content": "Earlier this year [Skyhawkson] got ahold of a Apollo-era printed circuit board which he believes was used in a NASA test stand. He took high quality photos of both sides of the board and superimposed them atop each other. After digging into a few obsolete parts from the 1960s, he was able to trace out the connections. I ran across the project just after making schematics for the Supercon badge and petal matrix. Being on a roll, I decided to take [Skyhawkson]s work as a starting point and create KiCad schematics. Hopefully we can figure out what this circuit board does along the way.\nThe board is pretty simple:\n\napproximately 6.5 x 4.5 inches\n22 circuit edge connector 0.156 in pitch\n31 ea two-terminal parts ( resistors, diodes )\n3 ea trimmer potentiometers\n7 ea transistors\nparts arranged in 4 columns\n\n\nThe first thing I did was to create a dumb schematic, with no logical significance other than it matched the geometry of the board. The result should match [Skyhawkson]s diagrams ( it did ).\nThe next step was to unwrap the parts and connections, with the goal of making recognizable circuits. It was easy to get circuits crossed up and lose track of the original connections. When making a PCB from schematics, if you delete connections and move parts around, you have the rats nest to guide you. But when going the other way, youre on your own.\nTo mitigate this, I made a placeholder PCB whose only purpose is to hold the true netlist. Having a correct PCB design provides a way to check the schematic. Go to the PCB editor, update the PCB from schematics, and run a DRC. I little cumbersome, but better than nothing.\nAs I first studied the diagram, I realized there are really two independent circuits on the PCB, connected by only one signal. This made unfolding and rearranging the parts easier. Not having any clue what this board did, I just untangled each transistor circuit one by one. Knowing the basic function of a transistor, there are only so many ways to orient each one that makes any sense. Soon, familiar circuits began to appear from the jumble of parts.\nObviously this card belonged in a rack system with an interconnecting back plane. We have no idea what these signals do, and that made it more challenging. In addition, there are some signals that seem unnecessary. My speculation is that these are used in PCB testing, test equipment checkout, or perhaps to operate the board in different modes.\nParts\nWhen researching the parts on the board, [Skyhawkson] found a few that were difficult to pin down. By coincidence, even the sketchy details of two such parts gives us clues to the boards purpose.\nCurrent Sense Resistor\nR125 is an X.1 ohm, 3W wirewound resistor. [Skyhawkson] had to peel back conformal coating to find even a partial part number. This resistor conforms to the MIL-R-26/C, RW59 specification. Many other RWxx resistors from this family are still used today, but RW59 seems to have been dropped a long time ago. It might have already been on the way out back in 1962.\nHaving such low resistance, perhaps 0.1 ohms, it seems likely to be a current sensing resistor. The low value and high wattage reinforces that idea. But I later realized that almost all of the resistors on the board are 3W, which I guess that was the norm back then. This makes the 3 W power rating of R125 less special. Adding to the mystery, one leg of R125 leaves the board. But lacking of a better explanation, I will stick to my initial guess that this is a current sense circuit.\nTemperature Compensated Zener\nThere are several zener diodes on the board, but only one of them has an elusive datasheet  the 1N2625. After combing through old semiconductor data books from the 1960s, I found some interesting information on this Zener diode in Motorolas Semiconductor Data Book from 1966. This diode comes from a family of temperature compensated Zener diodes 1N262x. Ignoring temperature grades, there are three basic ones 22, 23, and 24, which differ only in their temperature coefficient. But there are two more special ones in the series, 25 and 26, which sport even better TC values and have a slightly lower zener voltage of 9.4 vs 9.7 V.\nIf you try to track this part over the decades, it seems to have become / been rolled into the 1N937 series that, though obsolete, is still available from Microchip. But this 60 year old zener has a TC that is an order of magnitude better than its modern equivalent. This suggests that the 9.4 V reference voltage on this PCB plays a key role.\n1N262X Family Zener Diodes, Motorola Data Book 1966, pg 1-27\nBest Guess\nI see a precision voltage reference, what looks like a differential amplifier, and also know that the board was used in NASA test equipment. I immediately think sensor interface card  most certainly designed to interface with a strain gauge. A strain gauge is wired into one leg ( or more ) of a Wheatstone bridge excited by a precision voltage. The bridge imbalance is proportional to the strain of the material being measured. The weak signal is usually boosted by a differential amplifier followed by other conditioning circuits. And if your sensor interface card is flexible, you can also configure it to read RTDs, thermocouples, and other kinds of sensors as well. Sensor interface circuitry would certainly be a common need throughout NASA ground test equipment back in the 1960s, and today as well.\nExcitation Driver\nIf my analysis is correct, the supply takes about +80 VDC on the input before all three zener voltage references become active. That seems a bit high. But back in the 60s, maybe this was a common B+ voltage. But, if you only supply say 28 VDC, transistors Q101 and Q102 bypass the top and bottom zeners. Maybe all that circuitry is there just to allow a wide range of input voltages?\nDetail of Excitation Circuit, Best Guess\nThere seems to be a lot of unused edge connector signals, or at least signals I dont understand, associated with this section. I have a nagging feeling that some of these might be used by other parts of the system to check that the interface card is present and working, and that the cables to the sensor have not shorted nor broken.\nDifferential Input Amplifier\nOn the Hackaday.io project discussion section, hacker [Lauri Pirttiaho] pointed out that four of the transistors appeared to make up a differential amplifier. He is right I believe, and if he got that by just glancing at the PCB photos, Im really impressed. The circuit appears to drive a load located off-board, presumably generating a voltage to be recorded, plotted, converted to digital data, and/or viewed on meters. The operating point is biased by a current set by the zener and transistor combination CR109 / Q107, but the return path for that current isnt clear. I guessed it returns through the output power supply return, as drawn on the schematics, but am not 100% confident.\nThis CR109 / Q107 bias circuit can be turned off by grounding edge connector signal NET17, thus disabling the difference amplifier output transistors. This could be a useful feature for multiplexing a group of sensors boards onto a single using A2D converter. Instrumentation quality A2D converters were probably more expensive back in 1962, so this seems like a reasonably guess.\nDetail of Differential Amplifier, Best Guess\nEdge Connector, Nets\nI connected the external signals up to a 22-pin edge-card connector schematic symbol and labeled them according to my guesses. The hope was that their positions along the card edge connector would give me additional insight. They did not. Lacking any descriptive names for the nets, [Skyhawkson] numbered them. I retained that same scheme here. Note that nets 1 through 21 are go to the card edge, and nets 22 through 36 are internal to the board. He numbered the net names sequentially along the card edge connector. But because of the keying gap in the connector, the net numbers dont match the connector pin number from pin 5 onwards. For example, connector pin 6 is NET05 and so on.\nDetail of Edge Card Connector, Best Guess\nMystery Trimming\nThe section with the R125 current sense resistor also has a bunch of trimmer potentiometers, and almost all of the connections go off board. It might be use to adjust the gain and offset of the output signal. I also wonder these could somehow comprise the fixed legs of the bridge. Im at a loss here.\n\nLessons Learned and Next Steps?\nThis KiCad reverse engineering project has been both easier and more difficult than previous ones. The PCB is so simple by todays standards, and [Skyhawkson] has already done the tedious task of tracing out the connections. Hes also identified all the parts on the board and prepared a bill of materials. This was a great starting point.\nIn previous projects, I knew the schematic ahead of time or else I had a reasonable idea of the PCBs functionality and flow of signals. In the case of this Apollo-era board, I knew nothing. It was just a bunch of transistors and supporting discrete components. It made me appreciate modern IC packages, where knowing a part number gives big clues about its function.\nHints can be found in even the simplest parts. Figuring out that diode 1N2625 was a zener with 0.0002 % temperature coefficient was a big clue that a precision voltage reference was present. The low value R125 is probably a current sensing resistor, but what current is being sensed is still not clear.\nThe redrawn schematics are found in this GitHub repository. If you have any further ideas about how this circuit board might have been used, please let us know in the comments below. If we get enough additional information, maybe [Skyhawkson] can be convinced to power up the board and test it out."}