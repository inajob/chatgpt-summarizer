{"pubDate": "2023-11-06T06:00:30", "original_title": "Adding Temperature Sensor Functionality To The CH32V003 MCU", "link": "https://hackaday.com/2023/11/05/adding-temperature-sensor-functionality-to-the-ch32v003-mcu/", "source": "https://hackaday.com/blog/feed/", "thumbnail": "https://hackaday.com/wp-content/uploads/2023/02/ch32v003-featured.jpg", "original_content": "Plot of the temperature measurement using the improvised CH32V003 -based temperature sensor. (Credit: eeucalyptus)\nAs cheap as the WCH CH32V003 MCU is, its approximately $0.10 price tag looks far less attractive when you need to start adding on external ICs for missing basic features, such as temperature measurement. This is a feature thats commonly found on even basic STM32 MCUs. Fear not though, as [eeucalyptus] shows, you can improvise a working solution by finding alternative sources that can act as a thermometer.\nThe CH32V003 is a low-end, 32-bit RISC-V-based MCU by the China-based Nanjing Qinheng Microelectronics, commonly known abbreviated as WCH, and featured on Hackaday previously. Although it features a single-core, 48 MHz CPU, its selection of peripherals is fairly basic:\nInternal diagram of the CH32V003 MCU. (Credit: WCH)\nSo how do you create an internal temperature sensor using just this? [eeucalyptus] figured that all thats needed is to measure the drift between two internal clocks  such as the LSI and HSI  as temperatures change and use this to calibrate a temperature graph. Unfortunately, the LSI isnt readily accessible, even through the Timer peripheral. This left the AWU (automatic wake-up unit) which also uses the LSI as a clock source. By letting it go to sleep and wake up after N LSI cycles, the AWU enabled indirect access to the LSI.\nAfter calibrating against room temperature (~22 \u00b0C) and ice water (0 \u00b0C), a temperature plot was obtained, which could conceivably be somewhat accurate. As [eeucalyptus] warns, this is a kind of calibration that likely differs per MCU, and no attempt to quantify the absolute accuracy of this method has been made yet. Even so, as a crude temperature measurement, it might just be good enough.", "title": "\u81ea\u4f5c\u306e\u6e29\u5ea6\u30bb\u30f3\u30b5\u30fc\u3092\u4f7f\u3063\u305f\u6e29\u5ea6\u6e2c\u5b9a\u306e\u30d7\u30ed\u30c3\u30c8", "body": "WCH CH32V003 MCU\u3092\u4f7f\u7528\u3057\u3066\u6e29\u5ea6\u3092\u6e2c\u5b9a\u3059\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3002 \u5185\u90e8\u30af\u30ed\u30c3\u30af\u306e\u30c9\u30ea\u30d5\u30c8\u3092\u6e2c\u5b9a\u3057\u3066\u6e29\u5ea6\u30b0\u30e9\u30d5\u3092\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u3002 MCU\u3054\u3068\u306b\u7570\u306a\u308b\u305f\u3081\u7d76\u5bfe\u7cbe\u5ea6\u306f\u672a\u8a55\u4fa1\u3002\u3067\u3082\u3001\u7c97\u3044\u6e29\u5ea6\u8a08\u6e2c\u3068\u3057\u3066\u6a5f\u80fd\u3059\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002", "titles": ["\u81ea\u4f5c\u306e\u6e29\u5ea6\u30bb\u30f3\u30b5\u30fc\u3092\u4f7f\u3063\u305f\u6e29\u5ea6\u6e2c\u5b9a\u306e\u30d7\u30ed\u30c3\u30c8", "\u57fa\u672c\u7684\u306a\u6a5f\u80fd\u304c\u6b20\u3051\u3066\u3044\u308b\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u306b\u6e29\u5ea6\u8a08\u6e2c\u6a5f\u80fd\u3092\u8ffd\u52a0\u3059\u308b\u65b9\u6cd5", "WCH CH32V003 MCU\u3092\u4f7f\u7528\u3057\u305f\u5185\u90e8\u6e29\u5ea6\u30bb\u30f3\u30b5\u30fc\u306e\u4f5c\u6210\u65b9\u6cd5", "\u5185\u90e8\u6642\u8a08\u306e\u30c9\u30ea\u30d5\u30c8\u3092\u6e2c\u5b9a\u3057\u3066\u6e29\u5ea6\u30b0\u30e9\u30d5\u3092\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u3059\u308b\u65b9\u6cd5", "\u7c97\u60aa\u306a\u304c\u3089\u3082\u4f7f\u3048\u308b\u6e29\u5ea6\u6e2c\u5b9a\u65b9\u6cd5\uff1aLSI\u3068AWU\u306e\u9593\u306e\u95a2\u4fc2\u3092\u5229\u7528"]}