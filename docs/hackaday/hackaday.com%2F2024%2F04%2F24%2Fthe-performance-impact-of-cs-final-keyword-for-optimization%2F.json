{"pubDate": "2024-04-25T02:00:40", "original_title": "The Performance Impact of C++\u2019s `final` Keyword for Optimization", "link": "https://hackaday.com/2024/04/24/the-performance-impact-of-cs-final-keyword-for-optimization/", "source": "https://hackaday.com/blog/feed/", "thumbnail": "https://hackaday.com/wp-content/uploads/2024/04/percent_of_tests_which_are_slower.png", "original_content": "In the world of software development the term optimization is generally reason for experienced developers to start feeling decidedly nervous, especially when a feature is marked as an easy and free optimization. The final keyword introduced in C++11 is one of such features. It promises a way to speed up object-oriented code by omitting the vtable call indirection by marking a class or member function as  unsurprisingly  final, meaning that it cannot be inherited from or overridden. Inspired by this promise, [Benjamin Summerton] figured that hed run a range of benchmarks to see what performance uplift hed get on his ray tracing project.\nTo be as thorough as possible, the tests were run on three different systems, including 64-bit Intel and AMD systems, as well as on Apple Silicon (M1). For the compilers various versions of GCC (12.x, 13.x), as well as Clang\u00a0 (15, 17) and MSVC (17) were employed, with rather interesting results for final versus no final tests. Clang was probably the biggest surprise, as with the keyword added, performance with Clang-generated code absolutely tanked. MSVC was a mixed bag, as were the GCC versions other than GCC 13.2 on AMD Ryzen, which saw a bump of a few percent faster.\nUltimately, it seems that theres no free lunch as usual, and adding final to your code falls distinctly under only use it if you know what youre doing. As things stand, the resulting behavior seems wildly inconsistent.", "title": "C++11\u306efinal\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u3082\u305f\u3089\u3059\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5411\u4e0a\u306e\u52b9\u679c\u3068\u306f\uff1f", "body": "\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306b\u304a\u3051\u308b\u6700\u9069\u5316\u306f\u7d4c\u9a13\u8c4a\u5bcc\u306a\u958b\u767a\u8005\u306b\u3068\u3063\u3066\u795e\u7d4c\u3092\u5c16\u3089\u305b\u308b\u3053\u3068\u304c\u591a\u3044\u3002C++11\u3067\u5c0e\u5165\u3055\u308c\u305ffinal\u30ad\u30fc\u30ef\u30fc\u30c9\u306f\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5411\u4e0a\u3092\u7d04\u675f\u3059\u308b\u3082\u306e\u306e\u3001\u5b9f\u969b\u306b\u306f\u52d5\u4f5c\u304c\u4e0d\u5b89\u5b9a\u3067\u3042\u308a\u3001\u4f7f\u3044\u3069\u3053\u308d\u3092\u898b\u6975\u3081\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002Benjamin Summerton\u6c0f\u306ffinal\u3092\u4f7f\u3063\u305f\u5834\u5408\u306e\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u5b9f\u9a13\u3092\u884c\u3044\u3001\u7d50\u679c\u306f\u4e88\u60f3\u5916\u306e\u3082\u306e\u3060\u3063\u305f\u3002", "titles": ["C++11\u306efinal\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u3082\u305f\u3089\u3059\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5411\u4e0a\u306e\u52b9\u679c\u3068\u306f\uff1f", "\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u3054\u3068\u306efinal\u30ad\u30fc\u30ef\u30fc\u30c9\u306e\u5f71\u97ff\u3092\u691c\u8a3c\u3059\u308b\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u30c6\u30b9\u30c8", "GCC\u3084Clang\u3001MSVC\u306b\u304a\u3051\u308bfinal\u3068\u975efinal\u30c6\u30b9\u30c8\u306e\u6bd4\u8f03\u7d50\u679c", "\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u30b3\u30fc\u30c9\u306e\u6700\u9069\u5316\u306b\u304a\u3051\u308bfinal\u30ad\u30fc\u30ef\u30fc\u30c9\u306e\u5229\u7528\u65b9\u6cd5", "final\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u969b\u306b\u8003\u616e\u3059\u3079\u304d\u30dd\u30a4\u30f3\u30c8"]}