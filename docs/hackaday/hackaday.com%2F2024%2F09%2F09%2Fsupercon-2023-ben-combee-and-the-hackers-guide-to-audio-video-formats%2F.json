{"pubDate": "2024-09-09T17:00:25", "original_title": "Supercon 2023: Ben Combee And The Hacker\u2019s Guide To Audio/Video Formats", "link": "https://hackaday.com/2024/09/09/supercon-2023-ben-combee-and-the-hackers-guide-to-audio-video-formats/", "source": "https://hackaday.com/blog/feed/", "thumbnail": "https://hackaday.com/wp-content/uploads/2024/08/Ben-Combee_-A-Hackers-Guide-To-Audio_Video-Formats-16-22-screenshot-e1724736095423.png", "original_content": "Media formats have come a long way since the early days of computing. Once upon a time, the very idea of even playing live audio was considered a lofty goal, with home computers instead making do with simple synthesizer chips instead. Eventually, though, real audio became possible, and in turn, video as well.\nBut what of the formats in which we store this media? Today, there are so many\u2014from MP3s to MP4s, old-school AVIs to modern *.h264s. Senior software engineer Ben Combee came down to the 2023 Hackaday Supercon to give us all a run down of modern audio and video formats, and how theyre best employed these days.\n\nVaguely Ironic\nThanks to vectrexer, who raised the alarm that the streams sound needed to be kicked into gear.\nBefore we dive into the meat of the talk, its important we acknowledge the elephant in the room. Yes, the audio on Bens talk was completely absent until seven minutes and ten seconds in. The fact that this happened on a talk about audio/visual matters has not escaped us. In any case, Bens talk is still very much worth watching\u2014most of it has perfectly fine audio and you can quite easily follow what hes saying from his slides. Ben, you have our apologies in this regard.\n\nChoose Carefully\nYou know the great thing about MP3? The patents expired in 2018!\nBens talk starts with fundamentals. He notes you need to understand your situation in exquisite detail to ensure youre picking the correct format for the job. You need to think about what platform youre using, how much processing you can do on the CPU, and how much RAM you have to spare for playback. Theres also the question of storage, too. Questions of latency are also important if your application is particularly time-sensitive, and you should also consider whether youll need to encode streams in addition to simply decoding them. Or, in simpler terms, are you just playing media, or are you recording it too? Finally, he points out that you should consider licensing or patent costs. This isnt such a concern on small hobby projects, but its a big deal if youre doing something commercially.\nWhen it comes to picking an audio format, youll need to specify your desired bit rate, sample size, and number of channels. Metadata might be important to your application, too. He provides a go-to list of popular choices, from the common uncompressed PCM to the ubiquitous MP3. Beyond that, there are more modern codecs like AAC and Vorbis, as well as those for specialist applications like aLaw and uLaw.\nBrightness is what humans notice most! That lets you do some neat things where you spend more data on brightness levels and less on specific colors.\u00a0\nBen notes that MP3 is particularly useful these days, as its patents ran out in 2018. However, it does require a lot of software to decode, and can take quite a bit of hardware resources too (on the embedded scale, at least). Meanwhile, Opus is a great open-source format that was specifically designed for speech applications, and has low bitrate options handy if you need them.\nWhen it comes to video, Ben explains that it makes sense to first contemplate images. After all, what is video but a sequence of images? So many formats exist, from raw bitmaps to tiled formats and those relying on all kinds of compression. Theres also color formats to consider, along with relevant compression techniques like run-length encoding and the use of indexed color palettes. Youre probably familiar with RGB, but Ben goes through a useful explanation of YUV too, and why its useful. In short, its a color format that prioritizes brightness over color information because thats whats most important to a human viewers perception.\nDecoding video usually means storing multiple frames in memory.\nAs for video formats themselves, there are a great many to pick from. Motion JPEG is one of the simplest, which is mostly just a series of JPEGs played one after another. Then there are the MPEG-1 and MPEG-2 standards from the 1990s, which were once widespread but have dropped off a lot since. H.264 has become a leading modern video standard, albeit with some patent encumbrances that can make it hard or expensive to use in some cases. H.265 is even more costly again. Standards like VP8, VP9, and AV1 were created to side step some of these patent issues, but with mixed levels of success. If youre building a commercial product, youll have to consider these things.\nBen explains that video decoding can be very hardware intensive, far more so than working with simple images. Much of the time, it comes down to reference frames. Many codecs periodically store an I-frame, which is a fully-detailed image. They then only store the parts of the image that change in following frames to save space, before eventually storing another full I-frame some time later. This means that you need lots of RAM to store multiple frames of video at once, since decoding a later frame requires the earlier one as a reference.\nInterestingly, Ben states that MPEG-1 is one of his favorite codecs at the moment. He explains its history as a format for delivering video on CD, noting that while it never took off in the US, it was huge in Asia. It has the benefit of being patent free since 2008. Its also easy to decode with in C with a simple header called pl_mpeg. It later evolved into MPEG-2 which remains an important broadcast standard to this day.\nBen explains the nitty-gritty syncronization work he did in CircuitPython to sync audio with his custom Daft Punk word clock.\nThe talk also crucially covers synchronization. In many cases, if youve got video, youve got audio that goes along with it. Even a small offset between the two streams can be incredibly off-putting; all the worse if theyre drifting relative to each other over time. Sync is also important for things like closed captions, too.\nUltimately, if youre pursuing an audio or video project and youve never done one before, this talk is great for you. Rather than teaching you any specific lesson, its a great primer to get you thinking about the benefits and drawbacks of various media formats, and how you might pick the best one for your application. Bens guide might just save you some serious development time in future\u2014and some horrible patent lawsuits to boot!", "title": "\u30e2\u30c0\u30f3\u30aa\u30fc\u30c7\u30a3\u30aa\uff06\u30d3\u30c7\u30aa\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u6d3b\u7528\u6cd5", "body": "\u30b3\u30f3\u30d4\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u9ece\u660e\u671f\u304b\u3089\u30e1\u30c7\u30a3\u30a2\u5f62\u5f0f\u306f\u9032\u5316\u3057\u3001\u30aa\u30fc\u30c7\u30a3\u30aa\u3068\u30d3\u30c7\u30aa\u304c\u5b9f\u73fe\u3057\u305f\u3002\u97f3\u58f0\u3068\u6620\u50cf\u306e\u73fe\u4ee3\u7684\u306a\u5f62\u5f0f\u3084\u9078\u629e\u57fa\u6e96\u306b\u3064\u3044\u3066\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30a8\u30f3\u30b8\u30cb\u30a2Ben Combee\u306e\u8b1b\u6f14\u5185\u5bb9\u3092\u7d39\u4ecb\u3002\u30e1\u30c7\u30a3\u30a2\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u9078\u629e\u306b\u95a2\u9023\u3059\u308b\u91cd\u8981\u4e8b\u9805\u3092\u53d6\u308a\u4e0a\u3052\u3001\u8a2d\u8a08\u4e0a\u306e\u30d2\u30f3\u30c8\u3092\u63d0\u4f9b\u3059\u308b\u3002", "titles": ["\u30e2\u30c0\u30f3\u30aa\u30fc\u30c7\u30a3\u30aa\uff06\u30d3\u30c7\u30aa\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u6d3b\u7528\u6cd5", "MP3\u7279\u8a31\u306e\u6e80\u4e86\u3067\u6ce8\u76ee\uff01\u9078\u3073\u629c\u304b\u308c\u305f\u97f3\u58f0\u30d5\u30a9\u30fc\u30de\u30c3\u30c8", "\u660e\u308b\u3055\u304c\u30dd\u30a4\u30f3\u30c8\uff01\u30d3\u30c7\u30aa\u30c7\u30b3\u30fc\u30c9\u306e\u79d8\u8a23", "MPEG-1\u304b\u3089MPEG-2\u3078\u2500\u30d3\u30c7\u30aa\u30b3\u30fc\u30c7\u30c3\u30af\u306e\u9032\u5316", "\u30e1\u30c7\u30a3\u30a2\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u691c\u8a0e\u30dd\u30a4\u30f3\u30c8\uff06\u9078\u5b9a\u65b9\u6cd5"]}