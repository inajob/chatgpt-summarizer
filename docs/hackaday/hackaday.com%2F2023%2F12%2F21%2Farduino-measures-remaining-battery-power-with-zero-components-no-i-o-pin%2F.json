{"pubDate": "2023-12-21T09:00:36", "original_title": "Arduino Measures Remaining Battery Power With Zero Components, No I/O Pin", "link": "https://hackaday.com/2023/12/21/arduino-measures-remaining-battery-power-with-zero-components-no-i-o-pin/", "source": "https://hackaday.com/blog/feed/", "thumbnail": "https://hackaday.com/wp-content/uploads/2023/12/VCC_VREF-e1703018801952.png", "original_content": "[Trent M. Wyatt]s CPUVolt library provides a fast way to measure voltage using no external components, and no I/O pin. It only applies to certain microcontrollers, but he provides example Arduino code showing how handy this can be for battery-powered projects.\nThe usual way to measure VCC is simple, but has shortcomings.\nThe classical way to measure a systems voltage is to connect one of your MCUs ADC pins to a voltage divider made from a couple resistors. A simple calculation yields a reading of the systems voltage, but this approach has two disadvantages: one is that it constantly consumes power, and the other is that it ties up a pin that you might want to use for something else.\nThere are ways to mitigate these issues, but it would be best to avoid them entirely. Microchip application note 2447 describes a method of doing exactly that, and thats precisely what [Trent]s Arduino library implements.\nWhat happens in this method is one selects Vbg (a fixed internal voltage reference that is temperature-independent) as Vin, and selects Vcc as the ADCs voltage reference. This is essentially backwards from how the ADC is normally used, but it requires no external hookup and is only a bit of calculation away from determining Vcc in millivolts. There is some non-linearity in the results, but for the purposes of measuring battery power in a system or deciding when to send a low battery signal, its an attractive solution.\nBeing an Arduino library, CPUVolt makes this idea very easy to use, but the concept and method is actually something we have seen before. If youre interested in the low-level details, then check out our earlier coverage which goes into some detail on exactly what is going on, using an ATtiny84.", "title": "CPUVolt\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u30de\u30a4\u30b3\u30f3\u306e\u96fb\u5727\u3092\u6e2c\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb", "body": "[Trent M. Wyatt]\u306eCPUVolt\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001\u5916\u90e8\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3084I/O\u30d4\u30f3\u3092\u4f7f\u7528\u305b\u305a\u306b\u96fb\u5727\u3092\u6e2c\u5b9a\u3059\u308b\u901f\u3044\u65b9\u6cd5\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u4e00\u90e8\u306e\u30de\u30a4\u30af\u30ed\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306b\u306e\u307f\u9069\u7528\u3055\u308c\u307e\u3059\u304c\u3001\u5f7c\u306f\u30d0\u30c3\u30c6\u30ea\u99c6\u52d5\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3069\u308c\u3060\u3051\u4fbf\u5229\u304b\u3092\u793a\u3059Arduino\u30b3\u30fc\u30c9\u306e\u4f8b\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002", "titles": ["CPUVolt\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u30de\u30a4\u30b3\u30f3\u306e\u96fb\u5727\u3092\u6e2c\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb", "\u5916\u90e8\u90e8\u54c1\u3084I/O\u30d4\u30f3\u306a\u3057\u3067\u96fb\u5727\u3092\u6e2c\u308b\u65b9\u6cd5\u3092\u63d0\u4f9b\u3059\u308bCPUVolt\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u7d39\u4ecb", "\u96fb\u6e90\u304c\u30d0\u30c3\u30c6\u30ea\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u4fbf\u5229\u306aCPUVolt\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u305f\u6e2c\u5b9a\u65b9\u6cd5\u3092\u7d39\u4ecb", "Arduino\u30b3\u30fc\u30c9\u306e\u4f8b\u3092\u4f7f\u3063\u3066CPUVolt\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3069\u308c\u3060\u3051\u4fbf\u5229\u304b\u8aac\u660e", "\u30d0\u30c3\u30c6\u30ea\u99c6\u52d5\u306e\u30b7\u30b9\u30c6\u30e0\u3067\u306e\u96fb\u6c60\u306e\u96fb\u529b\u3092\u6e2c\u308b\u305f\u3081\u306eCPUVolt\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u6d3b\u7528\u65b9\u6cd5"]}